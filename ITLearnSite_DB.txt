/*�쉶�썝 �뀒�씠釉�*/
create table member(
email varchar2(40) primary key,
pw varchar2(20) not null,
name varchar2(10) not null,
gender number(2) ,
birth_year varchar2(10),
birth_month varchar2(10),
birth_day varchar2(10),
phonenumber varchar2(20),
address varchar2(10),
address1 varchar2(100),
address2 varchar2(100),
sms number(2),
auth varchar2(2) default 'N'
);

insert into member(email,pw,name,auth) values('admin@admin.com','1234','愿�由ъ옄','y');
insert into member values
('test@test.com','1234','�쉶�썝1',1,'2000','12','12','010-1234-5678','47246','遺��궛愿묒뿭�떆 遺��궛吏꾧뎄 �룞泥쒕줈 109 (遺��쟾�룞, �궪�븳怨⑤뱺寃뚯씠�듃)','�븘�씠�떚�쐧',1,'y');
insert into member values
('test1@test.com','1234','�쉶�썝2',1,'1995','1','11','010-1234-5678','47246','遺��궛愿묒뿭�떆 遺��궛吏꾧뎄 �룞泥쒕줈 109 (遺��쟾�룞, �궪�븳怨⑤뱺寃뚯씠�듃)','�븘�씠�떚�쐧',1,'y');


select * from member;

/*�옄猷뚯떎 �뀒�씠釉�*/
create table resource_table(
res_no number(38) primary key,
res_parentno number(38) default 0,
res_title varchar2(50),
res_email varchar2(40),
res_content varchar2(1000),
res_filename varchar2(50),
res_writedate date default sysdate,
constraint res_email_fk foreign key(res_email) references member(email) on delete cascade
);

insert into resource_table(res_no, res_title, res_email)
values(1, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(2, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(3, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(4, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(5, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(6, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(7, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(8, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(9, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(10, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(11, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(12, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(13, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(14, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(15, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(16, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(17, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(18, 'asdf', 'test@test.com');

select * from resource_table;

/*�옄猷뚯떎 �뙎湲� �뀒�씠釉�*/
create table resource_comments(
co_no number(38) primary key,
res_no number(38),
co_email varchar2(100),
co_date date default sysdate,
co_content varchar2(1000),
constraint res_no_fk foreign key(res_no) references resource_table(res_no) on delete cascade
);


select * from resource_comments;

/*�씠�슜臾몄쓽寃뚯떆�뙋*/
create table question_table(
ques_no number(38) primary key,
ques_parentno number(38) default 0,
ques_title varchar2(50),
ques_email varchar2(40),
ques_pw varchar2(20),
ques_content varchar2(4000),
ques_writedate date default sysdate,
ques_readcount number(38),
constraint ques_email_fk foreign key(ques_email) references member(email) on delete cascade
);

select * from question_table;

/*媛뺤쓽寃뚯떆�뙋*/
CREATE TABLE lecture_table (
lec_no  number(38) primary key,
lec_parentno number(38) default 0,
lec_title varchar2(50),
lec_price varchar2(50),
lec_content varchar2(4000),
lec_imgfile varchar2(50),
lec_spofile varchar2(50),
lec_uploaddate date default sysdate
);
/*
SELECT * 
FROM (
FROM
    (
        SELECT
            ROWNUM AS recnum,
            lvl,
            lec_no,
            lec_parentno,
            lec_title,
            lec_price,
            lec_imgfile,
            lec_spofile
        FROM
            (
                SELECT
                    level AS lvl,
                    lec_no,
                    lec_parentno,
                    lec_title,
                    lec_price,
                    lec_imgfile,
                    lec_spofile
                FROM
                    lecture_table
                START WITH
                    lec_parentno = 0
                CONNECT BY
                    PRIOR lec_no = lec_parentno
                ORDER SIBLINGS BY
                    lec_no DESC
            )
    )
WHERE
    recnum BETWEEN ( 1 - 1 ) * 100 + ( 1 - 1 ) * 10 + 1 AND ( 1 - 1 ) * 100 + 1 * 10;

SELECT
    *
FROM
    lecture_table;
*/
INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    1,
    '�떊�뙟 JSP',
    60000,
    'aaaa',
    'alim01.png',
    'alim01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    2,
    '�룞鍮덈굹 JAVA',
    60000,
    'aaaa',
    'dongjava01.png',
    'dongjava01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    3,
    '�젙誘몃굹 SQL',
    60000,
    'aaaa',
    'jeongsql01.png',
    'jeongsql01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    4,
    '由щ쿋�븯�� CSS',
    60000,
    'aaaa',
    'ricss01.png',
    'ricss01.mp4'
);

select * from lecture_table;



/*援먯옱寃뚯떆�뙋*/
--�떆���뒪 �깮�꽦
create sequence book_product_Seq
    start with 1
    increment by 1;
--drop SEQUENCE book_product_Seq;

create table book_table(
product_no number primary key, -- �긽�뭹 �벑濡� 踰덊샇濡� 議고쉶
book_title varchar2(400), -- 梨� �젣紐�
book_link varchar2(400), -- 留곹겕
book_image varchar2(400), -- �씠誘몄� 留곹겕
book_author varchar2(400), --  ���옄
book_price number, --  媛�寃�
book_discount number, --�븷�씤媛�
book_publisher varchar2(30), -- 異쒗뙋�궗
book_pubdate date,--異쒗뙋�씪                   
book_isbn varchar2(30), -- pubdate
book_description varchar2(4000),
book_stock number
);

select * from book_table;

/*�옣諛붽뎄�땲*/
create table cart_table(
cart_num int primary key,
email varchar2(20),
pro_name varchar2(400) not null,
pro_cnt number not null,
pro_price number not null,
pro_sort varchar2(20) not null,
pro_img varchar2(400)
);

insert into cart_table(cart_num, email, pro_name, pro_cnt, pro_price,pro_sort) values(1,'test@test.com','2020�떆�굹怨� �젙蹂댁쿂由� �궛�뾽湲곗궗 �떎湲�[湲곕낯�꽌]',1,31000,'援먯옱');
insert into cart_table(cart_num, email, pro_name, pro_cnt, pro_price,pro_sort) values(2,'test@test.com','2021�떆�굹怨� �젙蹂댁쿂由� �궛�뾽湲곗궗 �떎湲�[湲곕낯�꽌]',1,32000,'援먯옱');
insert into cart_table(cart_num, email, pro_name, pro_cnt, pro_price,pro_sort) values(3,'test@test.com','2025�떆�굹怨� �젙蹂댁쿂由� �궛�뾽湲곗궗 �떎湲�[湲곕낯�꽌]',1,36000,'援먯옱');
insert into cart_table(cart_num, email, pro_name, pro_cnt, pro_price,pro_sort) values(4,'test@test.com','由щ쿋�븯�� CSS',1,50000,'媛뺤쓽');

select * from cart_table;

create table payment_table(
pay_no number(38) primary key,
pay_email varchar2(40),
pay_name varchar2(50),
pay_phonenumber varchar2(50),
pay_address varchar2(50),
pay_address1 varchar2(100),
pay_address2 varchar2(100),
pay_pro1_name varchar2(400),
pay_pro1_cnt number,
pay_pro1_price number,
pay_pro1_sort varchar2(20),
pay_pro2_name varchar2(400),
pay_pro2_cnt number,
pay_pro2_price number,
pay_pro2_sort varchar2(20),
pay_pro3_name varchar2(400),
pay_pro3_cnt number,
pay_pro3_price number,
pay_pro3_sort varchar2(20),
pay_pro4_name varchar2(400),
pay_pro4_cnt number,
pay_pro4_price number,
pay_pro4_sort varchar2(20),
pay_pro5_name varchar2(400),
pay_pro5_cnt number,
pay_pro5_price number,
pay_pro5_sort varchar2(20),
pay_total varchar2(4000),
pay_option number(2),
constraint pay_email_fk foreign key(pay_email) references member(email)
);

create table set_pay_lec_table(
set_no number(3),
set_email varchar2(40),
set_lec_no number(38),
set_lec_title varchar2(50),
set_endDate date,
constraint set_email_fk foreign key(set_email) references member(email)
);

/*寃곗젣*/
create table payment_table(
pay_no number(38) primary key,
pay_cart_no number(38),
pay_email varchar2(40),
pay_name varchar2(50),
pay_phonenumber varchar2(50),
pay_address varchar2(50),
pay_address1 varchar2(50),
pay_address2 varchar2(50),
pay_pro_name varchar2(400),
pay_pro_cnt number,
pay_pro_price number,
pay_pro_sort varchar2(20),
pay_total varchar2(4000),
pay_option number(2),
constraint pay_email_fk foreign key(pay_email) references member(email) on delete cascade
);
select * from payment_table;

/*
媛뺤쓽 援щℓ 寃곗젣 �솗�씤 �떆 insert�맆 怨꾩젙蹂� 媛뺤쓽 由ъ뒪�듃
create table set_pay_lec_table(
set_no number(3),
set_email varchar2(40),
set_lec_no number(38),
set_lec_title varchar2(50),
set_endDate date,
constraint set_email_fk foreign key(set_email) references member(email)
);
*/

/*�쉶�썝 �궘�젣�떆 �쉶�썝�쓽 �옣諛붽뎄�땲�룄 �븿猿� �궘�젣*/
/*alter table cart_table add constraint cart_email_fk foreign key(cart_email) references member(email) on delete cascade;*/

--�뀒�씠釉� 紐⑤몢 �궘�젣
/*
drop table cart_table;
drop table lecture_table;
drop table member;
drop table payment_table;
drop table question_table;
drop table resource_comments;
drop table resource_table;
drop table book_table;
drop sequence book_product_Seq;*/
commit;