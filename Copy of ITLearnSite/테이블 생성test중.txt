/*회원 테이블*/
create table member(
email varchar2(40) primary key,
pw varchar2(20) not null,
name varchar2(10) not null,
gender number(2) ,
birth_year varchar2(10),
birth_month varchar2(10),
birth_day varchar2(10),
phonenumber varchar2(20),
address varchar2(10),
address1 varchar2(100),
address2 varchar2(100),
sms number(2),
auth varchar2(2) default 'N'
);
select *
from member;

insert into member(email,pw,name,auth) values('admin@admin.com','1234','관리자','y');
insert into member values
('test@test.com','1234','회원1',1,'2000','12','12','010-1234-5678','47246','부산광역시 부산진구 동천로 109 (부전동, 삼한골든게이트)','아이티윌',1,'y');
insert into member values
('test1@test.com','1234','회원2',1,'1995','1','11','010-1234-5678','47246','부산광역시 부산진구 동천로 109 (부전동, 삼한골든게이트)','아이티윌',1,'y');
commit;
select * from member;
/*자료실 테이블*/
create table resource_table(
res_no number(38) primary key,
res_parentno number(38) default 0,
res_title varchar2(50),
res_email varchar2(40),
res_content varchar2(1000),
res_filename varchar2(50),
res_writedate date default sysdate,
constraint res_email_fk foreign key(res_email) references member(email)
);

insert into resource_table(res_no, res_title, res_email)
values(1, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(2, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(3, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(4, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(5, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(6, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(7, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(8, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(9, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(10, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(11, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(12, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(13, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(14, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(15, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(16, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(17, 'asdf', 'test@test.com');
insert into resource_table(res_no, res_title, res_email)
values(18, 'asdf', 'test@test.com');

select * from resource_table;

/*자료실 댓글 테이블*/
create table resource_comments(
co_no number(38) primary key,
res_no number(38),
co_email varchar2(100),
co_pw varchar2(100),
co_date date default sysdate,
co_content varchar2(1000),
constraint res_no_fk foreign key(res_no) references resource_table(res_no) on delete cascade
);

select * from resource_comments;

/*이용문의게시판*/
create table question_table(
ques_no number(38) primary key,
ques_parentno number(38) default 0,
ques_title varchar2(50),
ques_email varchar2(40),
ques_pw varchar2(20),
ques_content varchar2(4000),
ques_writedate date default sysdate,
ques_readcount number(38),
constraint ques_email_fk foreign key(ques_email) references member(email)
);

select * from question_table;

/*강의게시판*/
CREATE TABLE lecture_table (
lec_no  number(38) primary key,
lec_parentno number(38) default 0,
lec_title varchar2(50),
lec_price varchar2(50),
lec_content varchar2(4000),
lec_imgfile varchar2(50),
lec_spofile varchar2(50),
lec_uploaddate date default sysdate
);
/*
SELECT * 
FROM (
FROM
    (
        SELECT
            ROWNUM AS recnum,
            lvl,
            lec_no,
            lec_parentno,
            lec_title,
            lec_price,
            lec_imgfile,
            lec_spofile
        FROM
            (
                SELECT
                    level AS lvl,
                    lec_no,
                    lec_parentno,
                    lec_title,
                    lec_price,
                    lec_imgfile,
                    lec_spofile
                FROM
                    lecture_table
                START WITH
                    lec_parentno = 0
                CONNECT BY
                    PRIOR lec_no = lec_parentno
                ORDER SIBLINGS BY
                    lec_no DESC
            )
    )
WHERE
    recnum BETWEEN ( 1 - 1 ) * 100 + ( 1 - 1 ) * 10 + 1 AND ( 1 - 1 ) * 100 + 1 * 10;

SELECT
    *
FROM
    lecture_table;
*/
INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    1,
    '신쌤 JSP',
    60000,
    'aaaa',
    'alim01.png',
    'alim01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    2,
    '동빈나 JAVA',
    60000,
    'aaaa',
    'dongjava01.png',
    'dongjava01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    3,
    '정미나 SQL',
    60000,
    'aaaa',
    'jeongsql01.png',
    'jeongsql01.mp4'
);

INSERT INTO lecture_table (
    lec_no,
    lec_title,
    lec_price,
    lec_content,
    lec_imgfile,
    lec_spofile
) VALUES (
    4,
    '리베하얀 CSS',
    60000,
    'aaaa',
    'ricss01.png',
    'ricss01.mp4'
);

select * from lecture_table;

create table product_table(
product_no number, -- 상품 번호
product_name varchar2(200), -- 상품 글 제목
product_price number, -- 상품 가격
product_image varchar2(100), -- 상품 이미지
product_content varchar(2000),-- 상품 설명 내용
product_uploaddate Date, --상품 등록 날짜

constraint product_no_pk primary key(product_no)
);

    
insert into product_table
(
    product_no, 
    product_name, 
    product_price, 
    product_amount
)
values
(
    PRODUCTSEQ.nextval,
    '강아지똥',
    10000,
    'https://bookthumb-phinf.pstatic.net/cover/137/971/13797129.jpg?type=m1\&udate=20180810',
    '책 내용입니다',
    sysdate
);
select * from product_table;
drop table product_table;

create table product_stock(
product_no number, -- 상품 번호
product_stock number, -- 재고

constraint product_no_fk1 foreign key (product_no) references product (product_no) ON DELETE CASCADE
);
--시퀀스 생성
create sequence book_product_Seq
    start with 1
    increment by 1;
create table book_table(
product_no number, -- 상품 등록 번호로 조회
book_title varchar2(400), -- 책 제목
book_link varchar2(400), -- 링크
book_image varchar2(400), -- 이미지 링크
book_author varchar2(400), --  저자
book_price number, --  가격
book_discount number, --할인가
book_publisher varchar2(30), -- 출판사
book_pubdate date,--출판일
book_isbn varchar2(30), -- pubdate
book_description varchar2(1000)

);

insert into book_table 
(
BOOK_PRODUCT_SEQ.nextval, 
'Do it! <b>자바</b> 프로그래밍 입문 (개발 10년, 강의 10년! 명강사의 기초 튼튼 코딩 밥상!)',
'http://book.naver.com/bookdb/book_detail.php?bid=13797129',
'https://bookthumb-phinf.pstatic.net/cover/137/971/13797129.jpg?type=m1&udate=20180810',
'박은종',
25000,
22500,
'이지스퍼블리싱',
20180806,
'1163030198 9791163030195',
'왕초보 학생들과 부대끼며 깨달은 눈높이로 <b>자바</b> 학습 노하우 대공개!개발 실무 10년, 강의 10년! 명강사의 기초 튼튼 코딩 밥상! 왕초보 학생들과 부대끼며 깨달은 눈높이로 <b>자바</b> 학습 노하우 대공개!비전공자, 문과생도 무릎을 ‘탁!’ 치며 이해하는 20년 경력 명강사의 <b>자바</b> 강의! 프로그래머를 꿈꾸는... '
);